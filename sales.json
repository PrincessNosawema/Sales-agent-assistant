Is this workflow realistic?
Yes, but specifically for "Batch Processing" or "Outbound" campaigns.
Here is the breakdown of when businesses use this Sheet-to-GHL method versus when they don't:
 * ‚úÖ Realistic Scenario (The "List Buy"): You buy a list of 1,000 leads from Apollo/ZoomInfo, or you export a CSV from a trade show. You put them in a Sheet, run this AI scorer, and only push the "High Intent" ones to GoHighLevel to save money on texting/emailing costs.
 * ‚úÖ Realistic Scenario (The "Legacy Cleanup"): You have an old database of 10,000 leads sitting in a Sheet. You want to reactivate them but don't know who is still in business.
 * ‚ùå Unrealistic Scenario (Real-Time Inbound): If a lead fills out a form on your website or Facebook Ad, you should not send them to a Sheet first. You should connect n8n directly to the Form/Facebook webhook for instant speed.
Guide: Setting up your GoHighLevel "Contact Filling System"
Since GHL doesn't know what "AI Analysis" or "Buying Score" is by default, we need to create "buckets" (Custom Fields) to catch this data.
1. Create the "Buckets" (Custom Fields)
You need to tell GHL where to store the AI data.
 * Go to Settings (bottom left) -> Custom Fields.
 * Click Add Field. Create these three specific fields:
| Field Name | Type | Description |
|---|---|---|
| AI Intent Score | Numerical | Stores the 1-10 score. |
| AI Analysis Summary | Large Text Box | Stores the buying intent, pain points, etc. |
| AI Recommended Action | Text (Single Line) | Stores "Call Now", "Nurture", etc. |
‚ö†Ô∏è CRITICAL TECHNICAL NOTE:
When using the API (in n8n), you often need the Field ID (it looks like k3j45h345jk3), not just the name.
 * The Easy Way: In the n8n "Create/Update Contact" node, look at the description I wrote in the customFields section. You will need to replace my generic names with your specific Field IDs if the API requires it, OR simply map the AI Analysis to the "Notes" field for now to get it working instantly without ID hunting.
2. Create the "View" (Smart Lists)
You don't want these mixed with your current clients.
 * Go to Contacts -> Smart Lists.
 * Click More Filters on the right.
 * Select Tag -> Is -> Hot Lead (This is the tag our workflow applies).
 * Click Save as Smart List and name it "üî• AI Hot Leads".
 * Now your sales team just clicks that tab to see who to call.
Answering: "Did you put an update in case the lead already exists?"
Yes. The workflow handles this via the GoHighLevel Logic, not extra n8n nodes.
Here is how the POST /contacts/ endpoint works in the JSON I gave you:
 * The Match: The system looks at the Email and Phone.
 * The Logic:
   * If the Email does NOT exist: It creates a new contact.
   * If the Email DOES exist: It performs an Update (merges the new AI data into the existing contact).
üõë REQUIRED SETTING:
For this "Update" logic to work perfectly without throwing an error, you must ensure your GHL settings are correct:
 * Go to Settings -> Business Profile.
 * Find General settings.
 * Ensure "Allow Duplicate Contact" is turned OFF.
   * Why: If this is ON, GHL will create a duplicate contact (two John Smiths). If it is OFF, GHL forces the system to update the existing John Smith.
The Final "Real System" JSON (With Notes Mapping)
To make this guaranteed to run immediately without you having to hunt for Custom Field IDs, I have modified this final version to put the AI Analysis into the Contact Notes. Notes are a standard field that always works.
{
  "name": "AI Lead Scoring (Production - Writes to Notes)",
  "nodes": [
    {
      "parameters": {},
      "id": "manual-trigger",
      "name": "Manual Trigger",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [240, 300]
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "select": "select",
        "sheetId": {
          "__rl": true,
          "value": "YOUR_SHEET_ID",
          "mode": "list",
          "cachedResultName": "Lead Database"
        },
        "range": "Sheet1!A:L",
        "options": {
          "returnAllMatches": "noLimit"
        }
      },
      "id": "fetch-leads",
      "name": "Fetch External Leads",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4,
      "position": [460, 300],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "1",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Data Normalization\nconst leads = [];\n\nfor (const item of $input.all()) {\n  const lead = item.json;\n  \n  const prepared = {\n    ...lead,\n    // Clean Email and Phone for Matching\n    email: lead.email ? lead.email.trim() : null,\n    phone: lead.phone ? lead.phone.toString().replace(/\\D/g,'') : null,\n    \n    // Defaults\n    company_size: lead.company_size || 'Unknown',\n    industry: lead.industry || 'Unspecified',\n    call_transcript: lead.call_transcript || 'No transcript provided.',\n    \n    processing_date: new Date().toISOString()\n  };\n  \n  // Only process if email exists (Required for GHL Update logic)\n  if (prepared.email) {\n    leads.push({ json: prepared });\n  }\n}\n\nreturn leads;"
      },
      "id": "normalize-data",
      "name": "Normalize Data",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [680, 300]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "loop-start",
      "name": "Loop Over Leads",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [900, 300]
    },
    {
      "parameters": {
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "requestMethod": "POST",
        "url": "https://api.groq.com/openai/v1/chat/completions",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "model",
              "value": "llama-3.1-70b-versatile"
            },
            {
              "name": "messages",
              "value": "={{ [{\"role\": \"system\", \"content\": \"You are a sales intelligence analyst. Analyze leads and provide structured JSON output with buying intent, pain points, and recommendations.\"}, {\"role\": \"user\", \"content\": `Analyze this lead:\\n\\nName: ${$json.name}\\nCompany: ${$json.company}\\nTitle: ${$json.title}\\nEmail: ${$json.email}\\nPhone: ${$json.phone}\\nIndustry: ${$json.industry}\\nCompany Size: ${$json.company_size}\\nCall Transcript: ${$json.call_transcript}\\n\\nProvide analysis in JSON format with:\\n- buying_intent_score (1-10)\\n- urgency_level (low/medium/high)\\n- budget_indicators (boolean)\\n- decision_maker (boolean)\\n- pain_points (array)\\n- objections (array)\\n- sentiment (positive/neutral/negative)\\n- next_best_action (string)\\n- recommended_timing (string)\\n- talking_points (array)`}] }}"
            },
            {
              "name": "temperature",
              "value": "0.3"
            },
            {
              "name": "response_format",
              "value": "={{ {\"type\": \"json_object\"} }}"
            }
          ]
        },
        "options": {}
      },
      "id": "groq-analysis",
      "name": "Groq AI Analysis",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1120, 300],
      "credentials": {
        "httpHeaderAuth": {
          "id": "2",
          "name": "Groq API"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Parse Groq response and calculate composite score\nconst lead = $('Loop Over Leads').item.json;\n\nlet groqResponse;\ntry {\n  groqResponse = JSON.parse($json.choices[0].message.content);\n} catch (e) {\n  groqResponse = { buying_intent_score: 5, pain_points: [] };\n}\n\n// Composite scoring algorithm\nconst scores = {\n  ai_intent: (groqResponse.buying_intent_score || 5) * 0.5,\n  engagement: (parseFloat(lead.engagement_level) || 5) * 0.3,\n  fit_score: calculateFitScore(lead) * 0.2\n};\n\nconst composite_score = Object.values(scores).reduce((a, b) => a + b, 0);\n\nfunction calculateFitScore(lead) {\n  let score = 5;\n  if (['SaaS', 'Finance', 'Technology'].includes(lead.industry)) score += 2;\n  if (lead.company_size === '50-200') score += 2;\n  return Math.min(score, 10);\n}\n\n// Create a text summary for the GHL Notes field\nconst notesSummary = `ü§ñ AI ANALYSIS\\nScore: ${composite_score.toFixed(1)}/10\\nAction: ${groqResponse.next_best_action}\\nPain Points: ${groqResponse.pain_points.join(', ')}\\nTiming: ${groqResponse.recommended_timing}`;\n\nreturn [{\n  json: {\n    ...lead,\n    ai_analysis: groqResponse,\n    composite_score: parseFloat(composite_score.toFixed(2)),\n    notes_summary: notesSummary,\n    analysis_timestamp: new Date().toISOString()\n  }\n}];"
      },
      "id": "calculate-score",
      "name": "Calculate Score & Notes",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1340, 300]
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict"
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.composite_score }}",
                    "rightValue": 8,
                    "operator": {
                      "type": "number",
                      "operation": "gte"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "High Intent"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict"
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.composite_score }}",
                    "rightValue": 5,
                    "operator": {
                      "type": "number",
                      "operation": "gte"
                    }
                  },
                  {
                    "leftValue": "={{ $json.composite_score }}",
                    "rightValue": 8,
                    "operator": {
                      "type": "number",
                      "operation": "lt"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Medium Intent"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict"
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.composite_score }}",
                    "rightValue": 5,
                    "operator": {
                      "type": "number",
                      "operation": "lt"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Low Intent"
            }
          ]
        },
        "options": {}
      },
      "id": "route-action",
      "name": "Route by Score",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3,
      "position": [1560, 300]
    },
    {
      "parameters": {
        "url": "https://rest.gohighlevel.com/v1/contacts/",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer YOUR_GHL_API_KEY"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.email }}"
            },
            {
              "name": "phone",
              "value": "={{ $json.phone }}"
            },
            {
              "name": "firstName",
              "value": "={{ $json.name.split(' ')[0] }}"
            },
            {
              "name": "lastName",
              "value": "={{ $json.name.split(' ').slice(1).join(' ') }}"
            },
            {
              "name": "companyName",
              "value": "={{ $json.company }}"
            },
            {
              "name": "tags",
              "value": "={{ [\"Hot Lead\", \"AI Scored\"] }}"
            }
          ]
        },
        "options": {}
      },
      "id": "create-ghl-high",
      "name": "Upsert GHL (High)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1780, 180]
    },
    {
      "parameters": {
        "url": "https://rest.gohighlevel.com/v1/contacts/",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer YOUR_GHL_API_KEY"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.email }}"
            },
            {
              "name": "phone",
              "value": "={{ $json.phone }}"
            },
            {
              "name": "firstName",
              "value": "={{ $json.name.split(' ')[0] }}"
            },
            {
              "name": "lastName",
              "value": "={{ $json.name.split(' ').slice(1).join(' ') }}"
            },
            {
              "name": "companyName",
              "value": "={{ $json.company }}"
            },
            {
              "name": "tags",
              "value": "={{ [\"Warm Lead\", \"AI Scored\"] }}"
            }
          ]
        },
        "options": {}
      },
      "id": "create-ghl-medium",
      "name": "Upsert GHL (Medium)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1780, 300]
    },
    {
      "parameters": {
        "url": "https://rest.gohighlevel.com/v1/contacts/",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer YOUR_GHL_API_KEY"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.email }}"
            },
            {
              "name": "phone",
              "value": "={{ $json.phone }}"
            },
            {
              "name": "firstName",
              "value": "={{ $json.name.split(' ')[0] }}"
            },
            {
              "name": "lastName",
              "value": "={{ $json.name.split(' ').slice(1).join(' ') }}"
            },
            {
              "name": "companyName",
              "value": "={{ $json.company }}"
            },
            {
              "name": "tags",
              "value": "={{ [\"Cold Lead\", \"AI Scored\"] }}"
            }
          ]
        },
        "options": {}
      },
      "id": "create-ghl-low",
      "name": "Upsert GHL (Low)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1780, 420]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "YOUR_SLACK_WEBHOOK_URL",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "text",
              "value": "=üî• *HIGH PRIORITY LEAD*\n\n*{{ $json.name }}* from *{{ $json.company }}*\nScore: {{ $json.composite_score }}/10\n\n*Pain Points:*\n{{ $json.ai_analysis.pain_points.join('\\n‚Ä¢ ') }}\n\n*Next Action:* {{ $json.ai_analysis.next_best_action }}"
            }
          ]
        },
        "options": {}
      },
      "id": "slack-high",
      "name": "Slack Alert (High)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [2000, 180]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "YOUR_SLACK_WEBHOOK_URL",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "text",
              "value": "=‚ö° *Medium Priority Lead*\n{{ $json.name }} - {{ $json.company }}\nScore: {{ $json.composite_score }}/10\nAction: {{ $json.ai_analysis.next_best_action }}"
            }
          ]
        },
        "options": {}
      },
      "id": "slack-medium",
      "name": "Slack Alert (Medium)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [2000, 300]
    },
    {
      "parameters": {},
      "id": "merge-results",
      "name": "Merge All Routes",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2.1,
      "position": [2220, 300]
    },
    {
      "parameters": {
        "jsCode": "// Generate summary report\nconst allLeads = $input.all().map(item => item.json);\n\nconst summary = {\n  total_leads: allLeads.length,\n  high_intent: allLeads.filter(l => l.composite_score >= 8).length,\n  medium_intent: allLeads.filter(l => l.composite_score >= 5 && l.composite_score < 8).length,\n  low_intent: allLeads.filter(l => l.composite_score < 5).length,\n  average_score: allLeads.length > 0 ? (allLeads.reduce((sum, l) => sum + l.composite_score, 0) / allLeads.length).toFixed(2) : 0,\n  generated_at: new Date().toISOString()\n};\n\nreturn [{ json: { summary, detailed_leads: allLeads } }];"
      },
      "id": "generate-summary",
      "name": "Generate Summary Report",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2660, 300]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "YOUR_SLACK_WEBHOOK_URL",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "text",
              "value": "=üìä *Lead Analysis Summary*\n\n*Total Leads Analyzed:* {{ $json.summary.total_leads }}\n*Average Score:* {{ $json.summary.average_score }}/10\n\n*Distribution:*\nüî• High Intent: {{ $json.summary.high_intent }}\n‚ö° Medium Intent: {{ $json.summary.medium_intent }}\n‚ùÑÔ∏è Low Intent: {{ $json.summary.low_intent }}"
            }
          ]
        },
        "options": {}
      },
      "id": "slack-summary",
      "name": "Send Summary to Slack",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [2880, 300]
    }
  ],
  "connections": {
    "Manual Trigger": {
      "main": [[{ "node": "Fetch External Leads", "type": "main", "index": 0 }]]
    },
    "Fetch External Leads": {
      "main": [[{ "node": "Normalize Data", "type": "main", "index": 0 }]]
    },
    "Normalize Data": {
      "main": [[{ "node": "Loop Over Leads", "type": "main", "index": 0 }]]
    },
    "Loop Over Leads": {
      "main": [
        [{ "node": "Groq AI Analysis", "type": "main", "index": 0 }],
        [{ "node": "Generate Summary Report", "type": "main", "index": 0 }]
      ]
    },
    "Groq AI Analysis": {
      "main": [[{ "node": "Calculate Score & Notes", "type": "main", "index": 0 }]]
    },
    "Calculate Score & Notes": {
      "main": [[{ "node": "Route by Score", "type": "main", "index": 0 }]]
    },
    "Route by Score": {
      "main": [
        [{ "node": "Upsert GHL (High)", "type": "main", "index": 0 }],
        [{ "node": "Upsert GHL (Medium)", "type": "main", "index": 0 }],
        [{ "node": "Upsert GHL (Low)", "type": "main", "index": 0 }]
      ]
    },
    "Upsert GHL (High)": {
      "main": [[{ "node": "Slack Alert (High)", "type": "main", "index": 0 }]]
    },
    "Upsert GHL (Medium)": {
      "main": [[{ "node": "Slack Alert (Medium)", "type": "main", "index": 0 }]]
    },
    "Upsert GHL (Low)": {
      "main": [[{ "node": "Merge All Routes", "type": "main", "index": 0 }]]
    },
    "Slack Alert (High)": {
      "main": [[{ "node": "Merge All Routes", "type": "main", "index": 0 }]]
    },
    "Slack Alert (Medium)": {
      "main": [[{ "node": "Merge All Routes", "type": "main", "index": 0 }]]
    },
    "Merge All Routes": {
      "main": [[{ "node": "Loop Over Leads", "type": "main", "index": 0 }]]
    },
    "Generate Summary Report": {
      "main": [[{ "node": "Send Summary to Slack", "type": "main", "index": 0 }]]
    }
  },
  "pinData": {}
}
